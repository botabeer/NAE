from flask import Flask, request, abort
from linebot import LineBotApi, WebhookHandler
from linebot.exceptions import InvalidSignatureError
from linebot.models import MessageEvent, TextMessage, TextSendMessage
import random, os

app = Flask(__name__)

LINE_CHANNEL_ACCESS_TOKEN = os.environ.get('LINE_CHANNEL_ACCESS_TOKEN')
LINE_CHANNEL_SECRET = os.environ.get('LINE_CHANNEL_SECRET')

line_bot_api = LineBotApi(LINE_CHANNEL_ACCESS_TOKEN)
handler = WebhookHandler(LINE_CHANNEL_SECRET)

# -------------------------------
# Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù€200 Ø­Ø¨/ØµØ±Ø§Ø­Ø©/Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©
# -------------------------------
questions = [
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨Ù‡ ÙÙŠ Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒØŸ",
"Ø§Ø¹ØªØ±Ù Ø¨Ø´ÙŠØ¡ ØªØ®ÙÙŠÙ‡ Ø¹Ù†Ù‡.",
"Ù‡Ù„ Ø³Ø¨Ù‚ ÙˆÙ†Ø¯Ù…Øª Ø¹Ù„Ù‰ ØªØµØ±Ù Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒØŸ",
"Ù‡Ù„ ØªØºØ§Ø± Ø¹Ù„ÙŠÙ‡ ÙƒØ«ÙŠØ±ØŸ",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ù‡ ÙŠÙÙ‡Ù…Ùƒ Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ø§Ù…ØŸ",
"Ù…Ø§ Ø£ÙˆÙ„ Ø´ÙŠØ¡ Ø¬Ø°Ø¨Ùƒ ÙÙŠÙ‡ØŸ",
"Ù‡Ù„ ØªØ¹ØªØ¨Ø± Ù†ÙØ³Ùƒ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø¨Ø§Ù‹ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ¨ØªØ³Ù… Ù…Ø¹Ù‡ØŸ",
"Ù…Ø§ Ø£Ø¬Ù…Ù„ Ø°ÙƒØ±Ù‰ Ø¨ÙŠÙ†ÙƒÙ…Ø§ØŸ",
"Ù‡Ù„ ØªØ«Ù‚ Ø¨Ù‡ Ø«Ù‚Ø© ÙƒØ§Ù…Ù„Ø©ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ù…ØµØ§Ù„Ø­Ø© Ø£Ù… ØªÙ†ØªØ¸Ø±ØŸ",
"Ù…Ø§ Ø£ÙˆÙ„ Ø´Ø¹ÙˆØ± Ø­Ø³Ù‘ÙŠØªÙ‡ Ù„Ù…Ø§ Ø´ÙØªÙ‡ Ø£ÙˆÙ„ Ù…Ø±Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù ÙŠØ®Ù„ÙŠÙ‡ ÙŠÙƒØ³Ø¨ Ø±Ø¶Ø§Ùƒ Ø¨Ø³Ø±Ø¹Ø©ØŸ",
"Ù‡Ù„ ØªÙØ¶Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø© Ø£Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚ØµÙŠØ±Ø©ØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø¨ÙƒÙŠØª Ù…Ù† Ø´ÙˆÙ‚Ùƒ Ù„Ù‡ØŸ",
"Ù‡Ù„ ØªØªØ®ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ù…Ø¹Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ÙƒÙ„Ù…Ø© ØªØ­Ø¨ ØªØ³Ù…Ø¹Ù‡Ø§ Ù…Ù†Ù‡ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ°ÙƒØ±Ùƒ ÙÙŠÙ‡ Ø¹Ù†Ø¯Ù…Ø§ ÙŠØºÙŠØ¨ØŸ",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ØºØ±Ø¨ Ø´Ø¹ÙˆØ± Ø´Ø¹Ø±Øª Ø¨Ù‡ ØªØ¬Ø§Ù‡ Ø´Ø±ÙŠÙƒÙƒ.",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ¨Ø± Ø®Ø·Ø£ Ø§Ø±ØªÙƒØ¨ØªÙ‡ ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ø¬Ø±ÙŠØ¡ Ù‚Ù…Øª Ø¨Ù‡ Ù…Ø¹ Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒ.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø¬Ø¹Ù„ØªÙƒ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ø´ØºÙ.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø¬Ø±Ø¨Øª Ø´ÙŠØ¦Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù…Ø¹Ù‡ Ø£Ùˆ Ù…Ø¹Ù‡Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø±ØºØ¨Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© ØªØªÙ…Ù†Ù‰ ØªØ­Ù‚ÙŠÙ‚Ù‡Ø§ Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒ.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ«ÙŠØ±Ùƒ Ø¹Ø§Ø·ÙÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø´Ø±ÙŠÙƒÙƒ.",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ«Ø± ØªØµØ±Ù Ø¬Ø°Ø¨Ùƒ Ù„Ø´Ø±ÙŠÙƒÙƒ.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨ ÙØ¹Ù„Ù‡ Ù…Ø¹Ù‡ ÙÙŠ Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø®Ø§ØµØ©.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø´Ø¹Ø±Øª Ø¨Ø§Ù„ØºÙŠØ±Ø© ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø£Ø±Ø³Ù„Øª Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ®Ø§Ù Ø£Ù† ÙŠÙØ¹Ù„Ù‡ Ø´Ø±ÙŠÙƒÙƒ.",
"Ù‡Ù„ ØªØ±ØºØ¨ Ø¨Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø£Ù… Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø³Ø¨Ù‚.",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù Ø­Ù†ÙˆÙ† Ù‚Ø§Ù… Ø¨Ù‡ Ù…Ø¹Ùƒ.",
"Ù…Ø§ Ø£Ø·Ø±Ù Ù…ÙˆÙ‚Ù Ø­ØµÙ„ Ù…Ø¹Ùƒ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©.",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ø´Ø¹Ø±Øª ÙÙŠÙ‡ Ø¨Ø§Ù„Ø®ÙˆÙ Ø¹Ù„ÙŠÙ‡.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ø­Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø¬Ø¹Ù„ØªÙƒ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ù…Ø¹Ù‡ Ø£Ùˆ Ù…Ø¹Ù‡Ø§.",
"Ø§Ø¹ØªØ±Ù Ø¨Ù…ÙˆÙ‚Ù Ø´Ø¹Ø±Øª ÙÙŠÙ‡ Ø¨Ø§Ù„Ø­Ø±Ø¬ Ø£Ù…Ø§Ù…Ù‡.",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØµÙØ© ØªØ­Ø¨Ù‡Ø§ ÙÙŠÙ‡ Ø£Ùˆ ÙÙŠÙ‡Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© ØªØªÙ…Ù†Ù‰ ØªÙƒØ±Ø§Ø±Ù‡Ø§.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø´Ø¹Ø±Øª Ø¨Ø§Ù„Ø±ØºØ¨Ø© ÙÙŠ Ø§Ù„Ù‡Ø±ÙˆØ¨ Ù…Ø¹Ù‡ Ø£Ùˆ Ù…Ø¹Ù‡Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ°ÙƒØ±Ùƒ Ø¨Ø´Ø±ÙŠÙƒÙƒ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø¯.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø£Ø®Ø¨Ø±Øª Ø´Ø®ØµØ§Ù‹ Ø³Ø±Ø§ Ø¹Ù† Ø¹Ù„Ø§Ù‚ØªÙƒ.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† ÙƒØªØ¨Øª Ù„Ù‡ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ Ø·ÙˆÙŠÙ„Ø©.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´ØªØ§Ù‚ Ù„Ù‡ Ø£Ùˆ Ù„Ù‡Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØªÙ…Ù†Ù‰ ÙØ¹Ù„Ù‡ Ù…Ø¹Ù‡ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¡.",
"Ù…Ø§ Ø£ÙƒØ«Ø± ÙƒÙ„Ù…Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ù‚Ù„ØªÙ‡Ø§ Ù„Ù‡ Ø£Ùˆ Ù„Ù‡Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ­Ø³ Ø¨Ø§Ù„Ø­Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ‚.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ù…Ø¶Ø­Ùƒ Ø­ØµÙ„ Ø¨ÙŠÙ†ÙƒÙ…Ø§.",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù ÙŠØ«ÙŠØ± ØºÙŠØ±ØªÙƒ.",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ø¬Ø¹Ù„Ùƒ ØªÙ†Ø¯Ù….",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø´Ø¹Ø±Øª Ø¨Ø§Ù„Ø¨Ø±ÙˆØ¯ ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¹ÙŠØ¯ Ø§Ù„Ø´ØºÙ Ø¨ÙŠÙ†ÙƒÙ…Ø§ØŸ",
"Ù‡Ù„ ØªØ«Ù‚ Ø¨Ø´Ø±ÙŠÙƒÙƒ Ø«Ù‚Ø© ÙƒØ§Ù…Ù„Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø¬Ø¹Ù„ØªÙƒ ØªÙ‚ÙˆÙ„ ÙÙŠ Ù†ÙØ³Ùƒ (Ø£Ù†Ø§ Ù…Ø­Ø¸ÙˆØ¸ Ø¨Ù‡).",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø®Ø°Ù„Øª Ø´Ø±ÙŠÙƒÙƒØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØºÙØ± Ø¨Ø³Ø±Ø¹Ø©ØŸ",
"Ù‡Ù„ ØªÙØ¶Ù„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø© Ø£Ù… Ø§Ù„Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ù…ÙØ§Ø¬Ø¢ØªØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø´Ø¹Ø±Øª ÙÙŠÙ‡Ø§ Ø£Ù† Ø­Ø¨ÙƒÙ… Ù†Ø¶Ø¬ØŸ",
"Ù‡Ù„ ØªØ¹ØªØ¨Ø± Ø§Ù„ØºÙŠØ±Ø© Ø¯Ù„ÙŠÙ„ Ø­Ø¨ØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† ØªØ®ÙŠÙ„Øª Ø­ÙŠØ§ØªÙƒ Ø¨Ø¯ÙˆÙ†Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ±Ø¨Ø·Ùƒ ÙÙŠÙ‡ Ø±ÙˆØ­ÙŠØ§Ù‹ØŸ",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ«Ø± Ø³Ø± Ù„Ø§ ÙŠØ¹Ø±ÙÙ‡ Ø¹Ù†Ùƒ.",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø¨ÙƒÙŠØª Ø¨Ø³Ø¨Ø¨Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´Ø¹ÙˆØ± ØªØ­Ø¨ Ø£Ù† ÙŠÙ‚Ø¯Ù…Ù‡ Ù„ÙƒØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø­Ø³ÙŠØª Ø£Ù†Ùƒ ØªØ­Ø¨Ù‡ Ø£ÙƒØ«Ø± Ù…Ù…Ø§ ÙŠØ­Ø¨ÙƒØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù ÙŠØ¬Ø¹Ù„Ùƒ ØªØ±ØªØ§Ø­ Ù„Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ù‚Ù„Øª ÙÙŠÙ‡Ø§ (Ø£Ù†Ø§ Ø£Ø­Ø¨Ù‡ ÙØ¹Ù„Ø§Ù‹).",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªÙØªÙ‚Ø¯Ù‡ Ø¥Ø°Ø§ ØºØ§Ø¨ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´ØªØ§Ù‚ Ù„Ù‡ØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø­Ø³ÙŠØª Ø¨Ø§Ù„Ø®Ø°Ù„Ø§Ù† Ù…Ù†Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ÙƒÙ„Ù…Ø© ØªÙ‚ÙˆÙ„Ù‡Ø§ Ù„Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹ØŸ",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù† Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ØªØ­ØªØ§Ø¬ ØªØ¬Ø¯ÙŠØ¯ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´Ø¹Ø± Ø£Ù†Ùƒ Ù…Ø­Ø¨ÙˆØ¨ØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† ØªÙ…Ù†ÙŠØª Ø£Ù† ØªØ¹Ø±Ù Ù…Ø§ ÙŠÙÙƒØ± ÙÙŠÙ‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø­Ù„Ù…Øª Ø¨Ù‡Ø§ Ù…Ø¹Ù‡ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø£Ù† ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ù…ØµØ§Ù„Ø­Ø© Ø£Ù… ØªÙ†ØªØ¸Ø±ØŸ",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨ ÙÙŠ Ø´Ø®ØµÙŠØªÙ‡.",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØªÙ…Ù†Ù‰ ÙŠØªØºÙŠØ± ÙÙŠÙ‡ØŸ",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù† Ø­Ø¨ÙƒÙ… ÙŠØ²ÙŠØ¯ Ù…Ø¹ Ø§Ù„ÙˆÙ‚ØªØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø£Ù… Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„ØµØ§Ø¯Ù‚ Ø£ÙƒØ«Ø±ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ´Ø¹Ø±Ùƒ Ø¨Ø§Ù„Ø£Ù…Ø§Ù† Ù…Ø¹Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù ÙŠØ¬Ø¹Ù„ ÙŠÙˆÙ…Ùƒ Ø£Ø¬Ù…Ù„ØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ù†Ø¯Ù…Øª Ø¹Ù„Ù‰ ØªØµØ±Ù Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø£Ù† ØªØ³Ù…Ø¹ ÙƒÙ„Ù…Ø© Ø£Ø­Ø¨Ùƒ ÙƒØ«ÙŠØ±Ø§Ù‹ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù…ÙƒØ§Ù† ØªØªÙ…Ù†Ù‰ ØªÙ‚Ø¶ÙŠ ÙÙŠÙ‡ ÙˆÙ‚Øª Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© ØªÙ…Ù†ÙŠØª Ø§Ù„Ø²Ù…Ù† ÙŠØªÙˆÙ‚Ù ÙÙŠÙ‡Ø§ Ù…Ø¹Ù‡ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„ØµØ±Ø§Ø­Ø© Ø§Ù„Ù…Ø·Ù„Ù‚Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ¶Ø­Ùƒ Ù…Ø¹Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØµÙØ© ØªØ¬Ø¹Ù„Ùƒ ØªØ°ÙˆØ¨ Ø­Ø¨Ø§Ù‹ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù„Ø­Ø¸Ø© ØªÙ…Ù†ÙŠØª ÙÙŠÙ‡Ø§ Ù‚Ø±Ø¨Ù‡ØŸ",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ù‡ ÙŠÙÙ‡Ù…Ùƒ Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ø§Ù…ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ÙŠØ¬Ø¹Ù„Ùƒ ØªØºØ¶Ø¨ Ù…Ù†Ù‡ØŸ",
"Ù‡Ù„ ØªÙØ¶Ù„ Ø§Ù„ÙƒÙ„Ø§Ù… Ø£Ù… Ø§Ù„Ø£ÙØ¹Ø§Ù„ ÙÙŠ Ø§Ù„Ø­Ø¨ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø°ÙƒØ±Ù‰ Ù„Ø§ ØªÙ†Ø³Ø§Ù‡Ø§ Ù…Ø¹Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ø¬Ø¹Ù„Ùƒ ØªØ­Ø³ Ø£Ù†Ùƒ Ù…Ù‡Ù… Ù„Ù‡ØŸ",
"Ù‡Ù„ Ø§Ù„Ø­Ø¨ Ø¹Ù†Ø¯Ùƒ ØªØ¶Ø­ÙŠØ© Ø£Ù… Ù…Ø´Ø§Ø±ÙƒØ©ØŸ",
"Ø§Ø¹ØªØ±Ù Ø¨Ø£ÙˆÙ„ Ø´Ø¹ÙˆØ± Ø´Ø¹Ø±Øª Ø¨Ù‡ ØªØ¬Ø§Ù‡Ù‡.",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ùƒ ØªØ¨Ø§Ø¯Ø± Ø¨Ø§Ù„Ø­Ø¨ Ø£ÙƒØ«Ø±ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ÙƒÙ„Ù…Ø© ÙŠÙ‚ÙˆÙ„Ù‡Ø§ ÙˆØªØ¤Ø«Ø± ÙÙŠÙƒØŸ",
"Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† ØªØ®Ù„ÙŠØª Ø¹Ù† ÙƒØ¨Ø±ÙŠØ§Ø¦Ùƒ Ù…Ù† Ø£Ø¬Ù„Ù‡ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨Ù‡ ÙÙŠ Ø¶Ø­ÙƒØªÙ‡ØŸ",
"Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ù‡ ÙŠØ­Ø¨Ùƒ ÙƒÙ…Ø§ Ø£Ù†ØªØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ØªØµØ±Ù ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´ØªØ§Ù‚ Ù„Ù‡ ÙÙˆØ±Ø§Ù‹ØŸ",
"Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø·ÙˆÙŠÙ„Ø© Ø£Ù… Ø§Ù„Ù‚ØµÙŠØ±Ø©ØŸ",
"Ù…Ø§ Ø£ÙƒØ«Ø± ÙƒÙ„Ù…Ø© ØªØ±Ø¨Ø·Ùƒ Ø¨Ù‡ Ù„Ù„Ø£Ø¨Ø¯ØŸ"
]

user_asked_questions = {}

# -------------------------------
# Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­Ø¨
# -------------------------------
love_game_progress = {}
love_game_questions = [
    f"Ù…Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„ØµÙ„Ø­ Ø¨Ø¹Ø¯ Ø§Ù„Ø²Ø¹Ù„ØŸ",
    f"Ù…Ù† ÙŠÙ‚ÙˆÙ„ Ø£Ø­Ø¨Ùƒ Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØºØ§Ø± Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØ­Ø¨ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØ¹Ø¨Ø± Ø¹Ù† Ù…Ø´Ø§Ø¹Ø±Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŸ",
    f"Ù…Ù† ÙŠØ¶Ø­Ùƒ Ø£ÙƒØ«Ø± ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„ØºØ±ÙŠØ¨Ø©ØŸ",
    f"Ù…Ù† ÙŠØ­Ø¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµØºÙŠØ±Ø©ØŸ",
    f"Ù…Ù† ÙŠØ±Ø³Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø£ÙˆÙ„Ø§Ù‹ØŸ",
    f"Ù…Ù† ÙŠØ´ØªØ§Ù‚ Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† Ø£ÙƒØ«Ø± Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©ØŸ",
    f"Ù…Ù† ÙŠØ­Ø¨ Ø§Ù„Ù†ÙˆÙ… Ø¨Ø­Ø¶Ù† Ø§Ù„Ø¢Ø®Ø±ØŸ",
    f"Ù…Ù† ÙŠØ®Ø·Ø· Ù„Ù„Ù‚Ø§Ø¡ Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠÙ‚ÙˆÙ„ ÙƒÙ„Ù…Ø§Øª Ù„Ø·ÙŠÙØ© Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØ­Ø¨ Ù‚Ø¶Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø£ÙƒØ«Ø± Ù…Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠØŸ",
    f"Ù…Ù† ÙŠØªØ¶Ø§ÙŠÙ‚ Ø£Ø³Ø±Ø¹ØŸ",
    f"Ù…Ù† ÙŠØ¶Ø­Ùƒ Ø¹Ù„Ù‰ Ø£ØªÙÙ‡ Ø³Ø¨Ø¨ØŸ",
    f"Ù…Ù† ÙŠØ±Ø¶Ù‰ Ø¨Ø³Ø±Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø²Ø¹Ù„ØŸ",
    f"Ù…Ù† ÙŠÙØ§Ø¬Ø¦ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØºÙ†ÙŠ Ù„Ù„Ø­Ø¨ Ø£ÙƒØ«Ø±ØŸ",
    f"Ù…Ù† ÙŠØ¹Ø¨Ø± Ø¨Ù†Ø¸Ø±Ø§ØªÙ‡ Ø£ÙƒØ«Ø±ØŸ"
]

def start_love_game(user_id):
    love_game_progress[user_id] = {
        "questions": random.sample(love_game_questions, 10),
        "current": 0,
        "he": 0,
        "she": 0
    }
    q = love_game_progress[user_id]["questions"][0]
    return f"ğŸ’ Ù„Ø¹Ø¨Ø© Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­Ø¨ Ø¨Ø¯Ø£Øª!\nØ³Ø¤Ø§Ù„ 1: {q}\nØ§ÙƒØªØ¨ (Ù‡Ùˆ) Ø£Ùˆ (Ù‡ÙŠ)"

def update_love_game(user_id, answer):
    data = love_game_progress[user_id]
    if "Ù‡Ùˆ" in answer:
        data["he"] += 1
    elif "Ù‡ÙŠ" in answer:
        data["she"] += 1
    data["current"] += 1
    if data["current"] >= 10:
        if data["he"] > data["she"]:
            result = "ğŸ’™ Ù‡Ùˆ Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø¨Ù‹Ø§ Ø§Ù„ÙŠÙˆÙ…!"
        elif data["she"] > data["he"]:
            result = "ğŸ’– Ù‡ÙŠ Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø¨Ù‹Ø§ Ø§Ù„ÙŠÙˆÙ…!"
        else:
            result = "ğŸ’ Ø§Ù„Ø­Ø¨ Ù…ØªØ¨Ø§Ø¯Ù„ Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ Ø¨ÙŠÙ†ÙƒÙ…Ø§!"
        del love_game_progress[user_id]
        return f"Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!\n{result}"
    else:
        q = data["questions"][data["current"]]
        return f"Ø³Ø¤Ø§Ù„ {data['current']+1}: {q}\nØ§ÙƒØªØ¨ (Ù‡Ùˆ) Ø£Ùˆ (Ù‡ÙŠ)"

# -------------------------------
# ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ø¨
# -------------------------------
love_challenges = [
    "Ø§Ø±Ø³Ù„ Ù„Ù‡/Ù„Ù‡Ø§ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ Ø§Ù„Ø¢Ù†.",
    "ØµÙ Ø´Ø±ÙŠÙƒÙƒ Ø¨Ø«Ù„Ø§Ø« ÙƒÙ„Ù…Ø§Øª Ø¬Ù…ÙŠÙ„Ø©.",
    "Ø§ÙƒØªØ¨ Ù„Ù‡ Ø±Ø³Ø§Ù„Ø© ØªØ¨Ø¯Ø£ Ø¨ÙƒÙ„Ù…Ø© (Ø§Ø´ØªÙ‚Øª).",
    "Ù‚Ù„ Ù„Ù‡ Ø£ÙˆÙ„ Ø´ÙŠØ¡ Ø®Ø·Ø± Ø¨Ø¨Ø§Ù„Ùƒ Ø§Ù„Ø¢Ù†.",
    "Ø§Ø®ØªØ± Ø£ØºÙ†ÙŠØ© ØªØ¹Ø¨Ù‘Ø± Ø¹Ù† Ø­Ø¨Ùƒ Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ….",
    "Ø´Ø§Ø±Ùƒ ØµÙˆØ±Ø© Ø£Ùˆ Ø°ÙƒØ±Ù‰ Ù‚Ø¯ÙŠÙ…Ø© Ø¨ÙŠÙ†ÙƒÙ…Ø§.",
    "Ø§Ø°ÙƒØ± Ø£Ø¬Ù…Ù„ Ù„Ø­Ø¸Ø© Ø¬Ù…Ø¹ØªÙƒÙ….",
    "Ø§ÙƒØªØ¨ Ù„Ù‡ Ø´ÙŠ ÙŠØ¬Ø¹Ù„ ÙŠÙˆÙ…Ù‡ Ø£Ø¬Ù…Ù„.",
    "Ø§Ø®Ø¨Ø±Ù‡ Ø¨Ø´ÙŠØ¡ ØªØ­Ø¨Ù‡ ÙÙŠÙ‡ ÙˆÙ…Ø§ Ù‚Ø¯ Ù‚Ù„ØªÙ‡ Ù…Ù† Ù‚Ø¨Ù„.",
    "Ø®Ø·Ø· Ù„Ù…ÙØ§Ø¬Ø£Ø© ØµØºÙŠØ±Ø© Ø§Ù„ÙŠÙˆÙ… Ù„Ø´Ø±ÙŠÙƒÙƒ.",
    "Ø§ÙƒØªØ¨ Ù„Ù‡ Ø³Ø¨Ø¨ ÙˆØ§Ø­Ø¯ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ­Ø¨Ù‡ Ø£ÙƒØ«Ø± ÙƒÙ„ ÙŠÙˆÙ….",
    "Ø£Ø±Ø³Ù„ Ù„Ù‡ Ø±Ø³Ø§Ù„Ø© ØªÙ‚ÙˆÙ„ ÙÙŠÙ‡Ø§ (Ø£ÙÙƒØ± ÙÙŠÙƒ).",
    "Ø§Ø­ÙƒÙ Ù„Ù‡ Ø¹Ù† Ø£ÙˆÙ„ Ù…Ø±Ø© Ø®ÙÙ‚ Ù‚Ù„Ø¨Ùƒ Ù„Ù‡.",
    "Ù‚ÙˆÙ„ Ù„Ù‡ ÙƒÙ„Ù…Ø© Ø­Ø¨ Ù…Ø§ Ù‚Ù„ØªÙ‡Ø§ Ù„Ù‡ Ù…Ù† Ù‚Ø¨Ù„.",
    "Ø§Ø±Ø³Ù„ Ù„Ù‡ Ù†ÙƒØªØ© Ø£Ùˆ Ø´ÙŠØ¡ ÙŠØ¶Ø­ÙƒÙ‡.",
    "Ø´Ø§Ø±Ùƒ Ù…Ø¹Ù‡ Ø£Ù…Ù†ÙŠØ© ØªØªÙ…Ù†ÙˆÙ† ØªØ­Ù‚Ù‚ÙˆÙ†Ù‡Ø§ Ø³ÙˆØ§.",
    "Ø§Ø°ÙƒØ± Ø¹Ø§Ø¯Ø© Ø¨Ø³ÙŠØ·Ø© ØªØ­Ø¨Ù‡Ø§ ÙÙŠÙ‡.",
    "Ù‚ÙˆÙ„ Ù„Ù‡ Ø¬Ù…Ù„Ø© ØªØ¨Ø¯Ø£ Ø¨Ù€ (Ø£Ø­Ø¨Ùƒ Ù„Ø£Ù†...).",
    "ØªØ®ÙŠÙ„ Ù„Ø­Ø¸Ø© Ù…Ø«Ø§Ù„ÙŠØ© Ø¨ÙŠÙ†ÙƒÙ… ÙˆØ§Ø­ÙƒÙŠÙ‡Ø§ Ù„Ù‡.",
    "Ø§Ø°ÙƒØ± Ù…ÙˆÙ‚Ù Ø®Ù„Ø§Ùƒ ØªÙ‚ÙˆÙ„ (Ø£Ù†Ø§ Ù…Ø­Ø¸ÙˆØ¸ ÙÙŠÙ‡)."
]

# -------------------------------
# Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
# -------------------------------
@app.route("/callback", methods=['POST'])
def callback():
    signature = request.headers.get('X-Line-Signature', '')
    body = request.get_data(as_text=True)
    try:
        handler.handle(body, signature)
    except InvalidSignatureError:
        abort(400)
    return 'OK'

@handler.add(MessageEvent, message=TextMessage)
def handle_message(event):
    user_id = event.source.user_id
    text = event.message.text.strip().lower()

    if user_id in love_game_progress:
        reply = update_love_game(user_id, text)
        line_bot_api.reply_message(event.reply_token, TextSendMessage(text=reply))
        return

    if "Ø³Ø¤Ø§Ù„" in text or "Ø³ÙˆØ§Ù„" in text:
        asked = user_asked_questions.get(user_id, set())
        available = [q for q in questions if q not in asked]
        if not available:
            user_asked_questions[user_id] = set()
            available = questions.copy()
        q = random.choice(available)
        user_asked_questions.setdefault(user_id, set()).add(q)
        line_bot_api.reply_message(event.reply_token, TextSendMessage(text=q))
        return

    elif "Ù…Ù‚ÙŠØ§Ø³" in text or "Ø­Ø¨" in text:
        reply = start_love_game(user_id)
        line_bot_api.reply_message(event.reply_token, TextSendMessage(text=reply))
        return

    elif "ØªØ­Ø¯ÙŠ" in text:
        c = random.choice(love_challenges)
        line_bot_api.reply_message(event.reply_token, TextSendMessage(text=f"ğŸ’Œ {c}"))
        return

    elif "Ù…Ø³Ø§Ø¹Ø¯Ø©" in text:
        help_text = (
            "ğŸ’¬ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¨ÙˆØª:\n"
            "- 'Ø³Ø¤Ø§Ù„' Ø£Ùˆ 'Ø³ÙˆØ§Ù„' â†’ Ø¹Ø±Ø¶ Ø³Ø¤Ø§Ù„ Ø­Ø¨ Ø£Ùˆ ØµØ±Ø§Ø­Ø©.\n"
            "- 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­Ø¨' â†’ Ù„Ø¹Ø¨Ø© Ù…Ù† 10 Ø£Ø³Ø¦Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† ÙŠØ­Ø¨ Ø£ÙƒØ«Ø±.\n"
            "- 'ØªØ­Ø¯ÙŠ' Ø£Ùˆ 'ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ø¨' â†’ ØªØ¬Ø±Ø¨Ø© ØªØ­Ø¯ÙŠ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©.\n"
            "- ÙƒÙ„ Ù…Ø±Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±.\n"
            "- Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù„Ø¹Ø¨ â¤ï¸"
        )
        line_bot_api.reply_message(event.reply_token, TextSendMessage(text=help_text))
        return

if __name__ == "__main__":
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port)
